{
  "info": {
    "name": "Petshop Django Backend API",
    "description": "Cole칞칚o completa da API do sistema de petshop Django",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "refresh_token",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "游댏 Autentica칞칚o",
      "item": [
        {
          "name": "Obter Token JWT",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Extrair tokens da resposta",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('access_token', response.access);",
                  "    pm.collectionVariables.set('refresh_token', response.refresh);",
                  "    pm.test('Token obtido com sucesso', function () {",
                  "        pm.expect(response.access).to.be.a('string');",
                  "        pm.expect(response.refresh).to.be.a('string');",
                  "    });",
                  "} else {",
                  "    pm.test('Erro na autentica칞칚o', function () {",
                  "        pm.expect.fail('Credenciais inv치lidas');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"admin\",\n    \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/token/",
              "host": ["{{base_url}}"],
              "path": ["api", "token", ""]
            },
            "description": "Endpoint para obter token JWT de acesso e refresh"
          }
        },
        {
          "name": "Renovar Token JWT",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('access_token', response.access);",
                  "    pm.test('Token renovado com sucesso', function () {",
                  "        pm.expect(response.access).to.be.a('string');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"refresh\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/token/refresh/",
              "host": ["{{base_url}}"],
              "path": ["api", "token", "refresh", ""]
            },
            "description": "Endpoint para renovar o token JWT usando o refresh token"
          }
        }
      ]
    },
    {
      "name": "游논 Usu치rios",
      "item": [
        {
          "name": "Listar Usu치rios",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/users/",
              "host": ["{{base_url}}"],
              "path": ["api", "users", ""]
            },
            "description": "Lista todos os usu치rios (admin) ou apenas o usu치rio atual"
          }
        },
        {
          "name": "Obter Usu치rio por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/users/1/",
              "host": ["{{base_url}}"],
              "path": ["api", "users", "1", ""]
            },
            "description": "Obt칠m detalhes de um usu치rio espec칤fico"
          }
        },
        {
          "name": "Criar Usu치rio",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"novo_usuario\",\n    \"email\": \"usuario@exemplo.com\",\n    \"password\": \"senha123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/users/",
              "host": ["{{base_url}}"],
              "path": ["api", "users", ""]
            },
            "description": "Cria um novo usu치rio no sistema"
          }
        },
        {
          "name": "Atualizar Usu치rio",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"usuario_atualizado\",\n    \"email\": \"novo_email@exemplo.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/users/1/",
              "host": ["{{base_url}}"],
              "path": ["api", "users", "1", ""]
            },
            "description": "Atualiza completamente um usu치rio"
          }
        },
        {
          "name": "Atualizar Usu치rio Parcial",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"email_parcial@exemplo.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/users/1/",
              "host": ["{{base_url}}"],
              "path": ["api", "users", "1", ""]
            },
            "description": "Atualiza parcialmente um usu치rio"
          }
        },
        {
          "name": "Deletar Usu치rio",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/users/1/",
              "host": ["{{base_url}}"],
              "path": ["api", "users", "1", ""]
            },
            "description": "Remove um usu치rio do sistema"
          }
        }
      ]
    },
    {
      "name": "游늶 Ordens de Produ칞칚o",
      "item": [
        {
          "name": "Listar Ordens de Produ칞칚o",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ordens-producao/",
              "host": ["{{base_url}}"],
              "path": ["api", "ordens-producao", ""]
            },
            "description": "Lista todas as ordens de produ칞칚o (admin/gerente) ou apenas as do usu치rio atual"
          }
        },
        {
          "name": "Obter Ordem por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ordens-producao/1/",
              "host": ["{{base_url}}"],
              "path": ["api", "ordens-producao", "1", ""]
            },
            "description": "Obt칠m detalhes de uma ordem de produ칞칚o espec칤fica"
          }
        },
        {
          "name": "Criar Ordem de Produ칞칚o",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"produto\": \"Ra칞칚o Premium para C칚es\",\n    \"quantidade\": 50\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ordens-producao/",
              "host": ["{{base_url}}"],
              "path": ["api", "ordens-producao", ""]
            },
            "description": "Cria uma nova ordem de produ칞칚o"
          }
        },
        {
          "name": "Atualizar Ordem de Produ칞칚o",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"produto\": \"Ra칞칚o Premium para Gatos\",\n    \"quantidade\": 75\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ordens-producao/1/",
              "host": ["{{base_url}}"],
              "path": ["api", "ordens-producao", "1", ""]
            },
            "description": "Atualiza completamente uma ordem de produ칞칚o (apenas owner ou admin)"
          }
        },
        {
          "name": "Atualizar Ordem Parcial",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"quantidade\": 100\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ordens-producao/1/",
              "host": ["{{base_url}}"],
              "path": ["api", "ordens-producao", "1", ""]
            },
            "description": "Atualiza parcialmente uma ordem de produ칞칚o"
          }
        },
        {
          "name": "Deletar Ordem de Produ칞칚o",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ordens-producao/1/",
              "host": ["{{base_url}}"],
              "path": ["api", "ordens-producao", "1", ""]
            },
            "description": "Remove uma ordem de produ칞칚o (apenas owner ou admin)"
          }
        }
      ]
    },
    {
      "name": "游빍 Testes de Cen치rios",
      "item": [
        {
          "name": "Teste: Login + Criar Ordem",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Este teste faz login primeiro e depois cria uma ordem",
                  "console.log('Iniciando teste completo...');"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"produto\": \"Teste de Integra칞칚o\",\n    \"quantidade\": 1\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ordens-producao/",
              "host": ["{{base_url}}"],
              "path": ["api", "ordens-producao", ""]
            },
            "description": "Teste de cen치rio completo: autentica칞칚o + cria칞칚o de ordem"
          }
        }
      ]
    }
  ]
}